---
driver:
  name: docker

platforms:
  - name: debian13
    image: "geerlingguy/docker-debian13-ansible:latest"
    command: ""
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
      - /var/lib/containerd
    pre_build_image: true
    cgroupns_mode: host
    privileged: true

provisioner:
  name: ansible
  ansible_args:
    - --diff
  become: true
  # Test installation of userli plugin
  inventory:
    group_vars:
      all:
        roundcube_plugins:
          - archive
          - carddav
          - enigma
          - markasjunk
          - managesieve
          - zipdownload
          - userli
        roundcube_userli_url: "https://userli.example/api"
        roundcube_userli_token: "test-token"
        roundcube_userli_ssl_verify: false

dependency:
  name: galaxy
  options:
    requirements-file: requirements.yml
